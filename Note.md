# 0-准备

**业务开发流程：**

- 需求整理
- 熟悉UI设计稿
- 接口规范对接
- 搭建前端架构开发页面
- 线上部署

**基础知识**

**Node**

- 运行环境

- 后端编程语言（类比于Java、PHP）

- - 语法是用前端JS开发的

服务器和本机的node环境最好保持一致。

**Git**

**VueCli** 

- VueCli是一个插件包
- Node是一个软件包

which -a vue  //查看vue在哪

脚手架相当于搭了一个非业务架构。

- **npm  run  serve**

- - serve 是一个脚本，就是启动这个项目的脚本

- vue  ui  是脚手架内置的一套可视化系统

# 1-项目基础架构

**前端跨域解决方案** 

- **什么是前端跨域？**

- - 跨域是浏览器为了安全而做出的限制策略
  - 浏览器请求必须遵循同源策略：同域名、同端口、同协议

- **怎么解决前端跨域**

- - CORS跨域

​    npm i axios --save-dev    //  -save 自动把模块和版本号添加到dependencies部分    //  -save-dve 自动把模块和版本号添加到devdependencies部分

- - - 服务端设置，前端直接调用
    - 说明：后台允许前端某个站点进行访问
    - access-control-allow-origin: *

  - JSONP跨域

​    npm i jsonp --save-dev

- - - 前端适配，后台配合

    - 说明：前后端同时改造

    - 它不是一个(XHR)请求，而是一段js脚本

    - - 加载一段js脚本，服务器端会响应，把信息返回给callback函数，来实现回调  
      - jsonp内部封装了一个callback的参数**。**callback  =  __jp0：在jsonp内部定义了一个叫__jp0的函数，把结果传到__jp0里面去，从而拿到这个结果

  - **代理跨域**

  - - 接口代理：通过修改nginx服务器配置来实现

    - 说明：前端修改，后台不动

    - **vue.config.js**  就是webpack的配置表，最终会传送给Nodejs服务器，来实现服务的设置

    - - Nodejs服务器，遵循CommonJS规范

    - 什么是代理访问/a的时候，实际上底层会转发到/b。真正访问的是/b，看起来像访问自己的接口一样（就是自己的接口，但会通过nodejs转发别人的服务）

    - 改完配置需要重启项目

​        module.exports = {          devServer: {            host: "localhost",  //主机            port: 8080,  //端口            //代理            proxy: {              "/api": {  //访问的/api接口时                target: "https://www.imooc.com/",   //实际上是访问的www.imooc.com，即代理到这里                changeOrigin: true,  //是否要将主机头的源点更改为目标url地址                pathRewrite: {  //转发地址,转发规则                  "/api": "",  //统一接口                },              },            },          },        };

**接口处理**

**需求梳理**

- 熟悉文档、查看原型、读懂需求

- 了解前端设计稿 - 设计前端业务架构

- - 页面结构
  - 业务模式
  - 业务量工作量有多大

- 了解后台接口文档 - 指定相关对接规范

- - 有多少个接口
  - 前后端数据传输用什么的规范
  - 返回什么样的数据结构等

- 协调资源

- - 设计稿素材图片资源
  - 人员资源

- 搭建前端架构

1. 跟设计师沟通：	看设计稿。了解页面有哪些有多少个，前端项目架构怎么搭（搞清楚哪些组件是需要抽取的）
2. 跟后端沟通：	看接口文档。看有多少接口

**目录结构设置**

大图片放public里，小logo图片等放src-assets里，这和webpack打包有关 性能更优化。

**基本插件**

根据项目分析，先把依赖安装了。

ElementUI组件按需加载

使用sass预编译器（还有less 都是动态加载动态读取）

​    npm i axios --save-dev    npm i vue-router --save-dev    npm i vuex --save-dev    npm i vue-lazyload element-ui node-sass sass-loader vue-awesome-swiper vue-axios vue-cookie --save-dev --force

**路由封装**

SAP

解決 Cannot find module ‘babel-eslint'

npm install  eslint babel-eslint -g

有多少个设计稿，就有多少个页面

根据页面划分路由：从页面里面找共性 相似之处，然后拆分成父组件，从而封装出路由

其它：观察页面特点，是否需要动态传id等

1. 把页面结构初始化好
2. 开发html页面、交互
3. 请求前后端的对接连调等

**Storage封装**

- Cookie、localStorage、sessionStorage 三者区别

- - localStorage（本地存储）、sessionStorage（内存中存储） 都是一种存储技术
  - **存储大小**：Cookie  4K、Storage  5M
  - **有效期**：Cookie  拥有有效期，Storage永久存储
  - **存储位置**：Cookie 会发送到服务器端 存储在内存中，Storage只存储在浏览器端
  - **路径**：Cookie 有路径限制，Storage 只存储在域名下
  - **API**：Cookie 没有特定的API，Storage 有对应的API

- 为什么要封装Storage

- - Storage  本身有API，但是只是简单的 key/value形式
  - Storage  只存储字符串，需要人工转换成 json  对象
  - Storage  只能一次性清空，不能单个清空

**接口错误拦截**

- 统一报错
- 未登录统一拦截
- 请求值、返回值统一处理

axios：发请求

**接口环境设置**

- 开发上线的不同阶段，需要不同的配置

- 不同的跨域方式，配置不同

- 打包的时候统一注入环境参数，统一管理环境，输出不同的版本

- - webpack

**Mock设置**

模拟数据

网页开发 + 交互：前后端的对接联调（比如点击按钮能发送请求，能把数据拉回来），有mock方便在开发阶段做交互

**作用：**

- 开发阶段，为了高效率需要提前Mock
- 减少代码冗余、灵活插拔
- 减少沟通、减少接口联调时间

**方式：**

- 本地创建  json

- easy-mock 平台

- - 线上带宽资源紧
  - 推荐：自己搭建一个easy-mock平台，开源的GitHub可以直接下载

- 集成 Mock  API

- - 加载mockjs API，想当于把mock sever放到前端项目里，变相的作为中间层代理和拦截，返回值

# 2-页面开发

提取组件——为了复用

Sass的好处：

1. 预编译，可以提前定义变量。通过加载变量的方式动态实现样式的功能。
2. 语法可以嵌套

先实现结构 

先都写出来，再抽取公用的精简代码，维护架构。

（比如scss里的用mixin @include）

图片不同时设置宽高，只设置一边，让它自适应，以免宽高不成比例造成图片压缩

数据从后台请求，数据请求正确之后，数据渲染

<template>下必须有且只有一个根元素<div>

加绝对定位时，一定要告诉元素，它是根据谁来进行相对定位的（框住它定位的区域），否则它会脱离文档流。

凡是指令v-xxx=" xxx"，里面一定是变量，字符串要用' '引起来

前端任务：动态拉取数据渲染页面；完成交互。

# 3-上线部署

网址：协议+端口（80端口默认看不见）+主机（域名）+路径

输入一个地址后：

1. 查找缓存。从缓存读取文件
2. 解析域名背后的服务器厂商，即DNS解析/域名解析
3. 1. 1. 根据域名解析背后的IP，知道这个域名属于哪一台服务器
      2. IP背后对应一台服务器，找到（硬件）服务器后，前端浏览器和硬件服务器上的Web服务建立链接
      3. 建立链接通过后，浏览器就会向Web服务器发送请求（服务器上要安装Web服务器）
      4. TCP三次握手，握手通过后Web服务器会给前端返回一个前端页面的标签地址内容
      5. 前端拿到请求内容后，会做页面绘制渲染

**上线部署过程：**

- 剔除无用代码
- 性能优化

- - 图片

- - - 压缩网站：TinyPNG
    - 文件缓存服务器：七牛云qiniu.com
    - CDN加速服务器

- - 路由按需加载

- - - 只加载当前页面

- - 删除预加载

- 配置Nginx服务器

- - 域名解析

- - - 购买域名和服务器（百度云）
    - 域名备案

- - 启动服务

- - - 登录服务器

    - 下载安装服务器软件

    - - nginx安装
      - Node环境搭建（本项目不需要）

    - 二级域名部署

- - 上传项目

- - - FTP

- 保证项目能被访问到

 

 

 

 